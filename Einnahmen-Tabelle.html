<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daten übernehmen & formatieren</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/png" href="favicon.png">
    <style>
        table {
            border: 2px solid #000;
            width: 80%;
            margin: 20px auto;
            border-collapse: separate;
            border-radius:10px;
        }
        thead{
            background:#03a1fc;
        }
        th, td {
            border: 1px solid #000;
            padding: 6px;
            text-align: center;
        }
        input {
            width: 95%;
        }
        button {
            padding: 5px 10px;
        }
        .spacer {
            height: 300px;
        }
    </style>
</head>
<body style="height: 1500px;">
    <header id="main-header" style="display: flex; align-items: center; justify-content: space-between; padding: 40px 40px; background: white; border-radius: 8px; position: sticky; top: 0;">
        <a href="index.html" style="display: flex; align-items: center;">
            <img src="logo_sap.png" alt="logo_sap" style="width: 70px; height: auto; border: none; background: none; cursor: pointer;">
        </a>
        <div id="header-center" style="flex: 1; text-align: center; font-family: Arial, Helvetica, sans-serif; font-size: 25px;"></div>
        <!-- Buttons entfernt -->
    </header>

    <h1 id="page-title" style="text-align: center;">Einnahmen</h1>

    <!-- Eingabetabelle -->
    <table id="eingabeTabelle">
        <thead>
            <tr>
                <th>Datum</th>
                <th>Bezeichnung</th>
                <th>Wert (€)</th>
                <th>Zahlungsintervall (Monate)</th>
                <th>Aktion</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><input type="date" oninput="checkRowCompletion(this)"></td>
                <td><input type="text" oninput="checkRowCompletion(this)"></td>
                <td><input type="number" step="0.01" oninput="checkRowCompletion(this)"></td>
                <td><input type="number" oninput="checkRowCompletion(this)"></td>
                <td><button onclick="uebernehmen(this)">Übernehmen</button></td>
            </tr>
        </tbody>
    </table>

    <!-- Ausgabetabelle -->
    <table id="ausgabeTabelle">
        <thead>
            <tr>
                <th>Datum</th>
                <th>Bezeichnung</th>
                <th>Wert</th>
                <th>Zahlungsintervall</th>
            </tr>
        </thead>
        <tbody>
            <!-- Hier erscheinen übernommene Zeilen -->
        </tbody>
    </table>

    <div style="height: 1500px;"></div>

    <footer class="site-footer">
        <div class="footer-container">
            <div class="footer-section">
                <h3>Finanztool</h3>
                <p>Dein Tool für den sicheren Haushalt.</p>
            </div>
            <div class="footer-section">
                <h4>Links</h4>
                <ul>
                    <li><a href="#">Startseite</a></li>
                    <li><a href="#">Features</a></li>
                    <li><a href="#">Kontakt</a></li>
                    <li><a href="#">Impressum</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h4>Kontakt</h4>
                <p>Email: info@finanztool.de</p>
                <p>Tel: 01234 / 567890</p>
            </div>
            <div class="footer-section">
                <h4>Folge uns</h4>
                <div class="social-icons">
                    <a href="#"><img src="facebook.png" alt="Facebook" /></a>
                    <a href="#"><img src="instagram.png" alt="Instagram" /></a>
                    <a href="#"><img src="twitter.png" alt="Twitter" /></a>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            &copy; 2025 Finanztool. Alle Rechte vorbehalten.
        </div>
    </footer>

    <script>
        var wertEinn = 0;

        // Funktion zum Formatieren von Euro-Beträgen im deutschen Format
        function formatEuro(amount) {
            const euro = parseFloat(amount);
            if (isNaN(euro)) return "";
            return euro.toLocaleString("de-DE", { style: "currency", currency: "EUR" });
        }

        function checkRowCompletion(input) {
            const row = input.closest("tr");
            const inputs = row.querySelectorAll("input");

            let allFilled = true;
            inputs.forEach(inp => {
                if (!inp.value.trim()) {
                    allFilled = false;
                }
            });

            // ...optional: weitere Logik...
        }

        function uebernehmen(button) {
            const row = button.closest("tr");
            const inputs = row.querySelectorAll("input");

            const datum = inputs[0].value.trim();
            const bezeichnung = inputs[1].value.trim();
            const wertRaw = inputs[2].value.trim();
            const intervallRaw = inputs[3].value.trim();

            if (!datum || !bezeichnung || !wertRaw || !intervallRaw) {
                alert("Bitte alle Felder ausfüllen.");
                return;
            }

            const wertFormatiert = formatEuro(wertRaw);
            const intervallText = `${parseInt(intervallRaw)} Monat${intervallRaw == 1 ? '' : 'e'}`;

            // Neue Zeile in Ausgabetabelle
            const ausgabeTabelle = document.getElementById("ausgabeTabelle").getElementsByTagName("tbody")[0];
            const newRow = ausgabeTabelle.insertRow();

            [datum, bezeichnung, wertFormatiert, intervallText].forEach(val => {
                const cell = newRow.insertCell();
                cell.textContent = val;
            });

            // Eingabefelder leeren
            inputs.forEach(input => {
                input.value = "";
            });
        }

        // Sichtbarkeit des Titels im Header wie auf index.html
        document.addEventListener('DOMContentLoaded', function() {
            const pageTitle = document.getElementById('page-title');
            const headerCenter = document.getElementById('header-center');
            const mainHeader = document.getElementById('main-header');

            function checkTitleVisibility() {
                if (!pageTitle || !headerCenter || !mainHeader) return;
                const rect = pageTitle.getBoundingClientRect();
                const headerHeight = mainHeader.offsetHeight;
                if (rect.bottom <= headerHeight) {
                    headerCenter.textContent = "Einnahmen";
                    headerCenter.classList.add('visible');
                } else {
                    headerCenter.textContent = "";
                    headerCenter.classList.remove('visible');
                }
            }

            window.addEventListener('scroll', checkTitleVisibility);
            window.addEventListener('resize', checkTitleVisibility);
            checkTitleVisibility();
        });
    </script>
</body>
</html>
